[tox]
minversion = 4.4
skipsdist = True
envlist = docs

[testenv:docs]
deps =
  -r{toxinidir}/doc/requirements.txt
commands =
  doc8 doc/source -e txt -e rst
  sphinx-build -E -W -b html doc/source doc/build/html

[doc8]
# Settings for doc8:
# Ignore target directories and autogenerated files
ignore-path = doc/*/target,doc/*/build*
# File extensions to use
extensions = .rst,.txt
# Maximal line length should be 79 but we have some overlong lines.
# Let's not get far more in.
max-line-length = 79
# Disable some doc8 checks:
# D000: Check RST validity (cannot handle the "linenos" directive)
ignore = D000
